<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boogieman - 예약 현황</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        body {
            background-color: #E8F5E9;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
        }
        
        .logo {
            width: 50px;
            margin-right: 15px;
        }
        
        h1 {
            color: #00796B;
            font-size: 24px;
        }
        
        .user-section {
            display: flex;
            align-items: center;
        }
        
        .user-profile {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #66BB6A;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .user-name {
            margin-right: 15px;
        }
        
        .main-content {
            display: flex;
            gap: 20px;
        }
        
        .sidebar {
            width: 250px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }
        
        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border-radius: 5px;
            margin-bottom: 5px;
            color: #333;
            text-decoration: none;
            transition: background-color 0.3s;
        }
        
        .menu-item:hover {
            background-color: #E8F5E9;
        }
        
        .menu-item.active {
            background-color: #00796B;
            color: white;
        }
        
        .menu-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        .content {
            flex: 1;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }
        
        .page-title {
            color: #00796B;
            margin-bottom: 20px;
            font-size: 22px;
            display: flex;
            align-items: center;
        }
        
        .page-title i {
            margin-right: 10px;
        }
        
        .info-box {
            background-color: #E8F5E9;
            border-left: 4px solid #66BB6A;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        
        .info-box h3 {
            color: #00796B;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .info-box ul {
            list-style-type: none;
            padding-left: 10px;
        }
        
        .info-box li {
            margin-bottom: 5px;
            position: relative;
            padding-left: 15px;
        }
        
        .info-box li:before {
            content: "•";
            position: absolute;
            left: 0;
            color: #66BB6A;
        }
        
        .reserve-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .reserve-table th, .reserve-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .reserve-table th {
            background-color: #f9f9f9;
            font-weight: 500;
            color: #555;
        }
        
        .reserve-table tr:hover {
            background-color: #f5f5f5;
        }
        
        .status-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-waiting {
            background-color: #FFF3E0;
            color: #E65100;
        }
        
        .status-ready {
            background-color: #E8F5E9;
            color: #2E7D32;
        }
        
        .status-expired {
            background-color: #FFEBEE;
            color: #C62828;
        }
        
        .btn {
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            transition: background-color 0.3s;
        }
        
        .btn-primary {
            background-color: #66BB6A;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #00796B;
        }
        
        .btn-danger {
            background-color: #FFEBEE;
            color: #C62828;
        }
        
        .btn-danger:hover {
            background-color: #FFCDD2;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 0;
            color: #999;
        }
        
        .empty-state i {
            font-size: 50px;
            margin-bottom: 15px;
            color: #ddd;
        }
        
        .empty-state p {
            font-size: 16px;
            margin-bottom: 20px;
        }
        
        .empty-state .btn {
            padding: 10px 20px;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            width: 400px;
            max-width: 90%;
        }
        
        .modal-title {
            font-size: 20px;
            color: #00796B;
            margin-bottom: 20px;
        }
        
        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                margin-bottom: 20px;
            }
            
            .content {
                padding: 20px;
            }
            
            .reserve-table {
                font-size: 14px;
            }
            
            .reserve-table th, .reserve-table td {
                padding: 8px 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-section">
                <img src="../../../static/images/logo.png" alt="부기맨 로고" class="logo">
                <h1>Boogieman</h1>
            </div>
            <div class="user-section">
                <div class="user-profile">홍</div>
                <span class="user-name">홍길동님</span>
                <a href="/logout" class="btn btn-secondary">로그아웃</a>
            </div>
        </header>
        
        <div class="main-content">
            <div class="sidebar">
                <a href="/book/list" class="menu-item">
                    <i class="fas fa-book"></i> 도서 목록
                </a>
                <a href="/book/request" class="menu-item">
                    <i class="fas fa-file-alt"></i> 희망도서 신청
                </a>
                <a href="/loan/mypage" class="menu-item">
                    <i class="fas fa-user"></i> 마이페이지
                </a>
                <a href="/loan/reserve" class="menu-item active">
                    <i class="fas fa-bookmark"></i> 예약 현황
                </a>
                <a href="/notice/list" class="menu-item">
                    <i class="fas fa-bullhorn"></i> 공지사항
                </a>
                <a href="/notice/notification" class="menu-item">
                    <i class="fas fa-bell"></i> 알림
                </a>
                <a href="/about" class="menu-item">
                    <i class="fas fa-info-circle"></i> 소개
                </a>
            </div>
            
            <div class="content">
                <h2 class="page-title">
                    <i class="fas fa-bookmark"></i> 예약 현황
                </h2>
                
                <div class="info-box">
                    <h3>예약 안내</h3>
                    <ul>
                        <li>1인당 최대 2권까지 예약 가능합니다.</li>
                        <li>도서 1권당 최대 예약자는 2명까지입니다.</li>
                        <li>예약자가 2명 이상인 경우, 이후 예약은 불가합니다.</li>
                        <li>예약 2순위 이용자는 선순위 취소/만료 시 자동 승계됩니다.</li>
                        <li>예약 도서가 도착하면 문자로 알림이 발송됩니다.</li>
                        <li>예약 도서는 도착 후 3일 이내에 대출하지 않으면 예약이 취소됩니다.</li>
                    </ul>
                </div>
                
                <!-- 예약 목록이 있는 경우 -->
                <table class="reserve-table">
                    <thead>
                        <tr>
                            <th>도서명</th>
                            <th>저자</th>
                            <th>예약일</th>
                            <th>예약 순위</th>
                            <th>상태</th>
                            <th>만료일</th>
                            <th>관리</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>클린 코드</td>
                            <td>로버트 C. 마틴</td>
                            <td>2023-06-15</td>
                            <td>2/2</td>
                            <td><span class="status-badge status-waiting">대기 중</span></td>
                            <td>-</td>
                            <td>
                                <button class="btn btn-danger" onclick="openCancelModal(1)">취소</button>
                            </td>
                        </tr>
                        <tr>
                            <td>리팩터링 2판</td>
                            <td>마틴 파울러</td>
                            <td>2023-06-10</td>
                            <td>1/2</td>
                            <td><span class="status-badge status-ready">대출 가능</span></td>
                            <td>2023-06-18</td>
                            <td>
                                <button class="btn btn-primary" onclick="location.href='/book/detail/3'">대출하기</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <!-- 예약 목록이 없는 경우 -->
                <div class="empty-state" style="display: none;">
                    <i class="fas fa-bookmark"></i>
                    <p>현재 예약 중인 도서가 없습니다.</p>
                    <button class="btn btn-primary" onclick="location.href='/book/list'">도서 목록 보기</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 예약 취소 확인 모달 -->
    <div id="cancelModal" class="modal">
        <div class="modal-content">
            <h3 class="modal-title">예약 취소</h3>
            <p>
                '클린 코드' 도서의 예약을 취소하시겠습니까?<br>
                취소 후에는 예약 순위가 초기화됩니다.
            </p>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeModal()">아니오</button>
                <button class="btn btn-danger" onclick="confirmCancel()">예, 취소합니다</button>
            </div>
        </div>
    </div>
    
    <script>
        // 예약 취소 모달 열기
        function openCancelModal(reserveId) {
            document.getElementById('cancelModal').style.display = 'flex';
            // 실제 구현에서는 예약 ID를 저장하여 취소 시 사용
            window.currentReserveId = reserveId;
        }
        
        // 모달 닫기
        function closeModal() {
            document.getElementById('cancelModal').style.display = 'none';
        }
        
        // 예약 취소 확인
        function confirmCancel() {
            // 실제 구현에서는 서버에 예약 취소 요청 API 호출
            const reserveId = window.currentReserveId;
            console.log(`예약 ID ${reserveId} 취소 요청`);
            
            // 예시: 취소 후 페이지 새로고침
            closeModal();
            alert('예약이 취소되었습니다.');
            // location.reload();
            
            // 예시: 해당 행 제거 (실제 구현에서는 서버 응답 후 처리)
            const rows = document.querySelectorAll('.reserve-table tbody tr');
            if (rows.length === 1) {
                // 마지막 예약이 취소된 경우 빈 상태 표시
                document.querySelector('.reserve-table').style.display = 'none';
                document.querySelector('.empty-state').style.display = 'block';
            } else {
                // 해당 행만 제거
                rows[0].remove();
            }
        }
    </script>
</body>
</html>